<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Чтд.мс | свободный мессенджер</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
    <!-- Частицы фона -->
    <div class="particles-container">
        <div class="particle particle-1"></div>
        <div class="particle particle-2"></div>
        <div class="particle particle-3"></div>
        <div class="particle particle-4"></div>
        <div class="particle particle-5"></div>
        <div class="particle particle-6"></div>
    </div>
    
    <!-- Экран аутентификации -->
    <div id="authContainer" class="auth-container">
        <div class="auth-header">
            <div class="auth-logo">
                <div class="auth-logo-icon">
                    <svg class="logo-svg" viewBox="0 0 100 100">
                        <path class="logo-path" d="M50,10 L90,50 L50,90 L10,50 Z" />
                        <circle class="logo-circle" cx="50" cy="50" r="15" />
                    </svg>
                </div>
                <div class="auth-logo-text">Чтд.мс</div>
            </div>
            <p class="auth-subtitle">свободный мессенджер</p>
        </div>
        
        <div class="auth-tabs">
            <div class="auth-tab active" onclick="showAuthTab('login')">
                <span>Вход</span>
                <div class="tab-indicator"></div>
            </div>
            <div class="auth-tab" onclick="showAuthTab('register')">
                <span>Регистрация</span>
                <div class="tab-indicator"></div>
            </div>
        </div>
        
        <div id="authMessages"></div>
        
        <form id="loginForm" class="auth-form">
            <div class="form-group floating-label">
                <input type="email" id="loginEmail" class="form-control" placeholder=" " required>
                <label for="loginEmail">Email</label>
                <div class="form-line"></div>
            </div>
            <div class="form-group floating-label">
                <input type="password" id="loginPassword" class="form-control" placeholder=" " required>
                <label for="loginPassword">Пароль</label>
                <div class="form-line"></div>
            </div>
            <button type="submit" class="auth-btn" id="loginBtn">
                <span class="btn-text">Войти</span>
                <div class="btn-loader"></div>
                <div class="btn-ripple"></div>
            </button>
        </form>
        
        <form id="registerForm" class="auth-form hidden">
            <div class="form-group floating-label">
                <input type="text" id="registerName" class="form-control" placeholder=" " required>
                <label for="registerName">Имя пользователя</label>
                <div class="form-line"></div>
            </div>
            <div class="form-group floating-label">
                <input type="email" id="registerEmail" class="form-control" placeholder=" " required>
                <label for="registerEmail">Email</label>
                <div class="form-line"></div>
            </div>
            <div class="form-group floating-label">
                <input type="password" id="registerPassword" class="form-control" placeholder=" " required minlength="6">
                <label for="registerPassword">Пароль</label>
                <div class="form-line"></div>
            </div>
            <button type="submit" class="auth-btn" id="registerBtn">
                <span class="btn-text">Создать аккаунт</span>
                <div class="btn-loader"></div>
                <div class="btn-ripple"></div>
            </button>
        </form>
    </div>
    
    <!-- Основной интерфейс мессенджера -->
    <div id="appContainer" class="container hidden">
        <!-- Боковая панель -->
        <div class="sidebar">
            <div class="header">
                <div class="logo">
                    <div class="logo-icon">
                        <svg class="logo-svg-small" viewBox="0 0 100 100">
                            <path class="logo-path" d="M50,10 L90,50 L50,90 L10,50 Z" />
                            <circle class="logo-circle" cx="50" cy="50" r="15" />
                        </svg>
                    </div>
                    <div class="logo-text">Чтд.мс</div>
                </div>
                <div class="user-menu">
                    <div class="user-avatar pulse" id="userAvatar" onclick="toggleDropdown()">U</div>
                    <div id="dropdownMenu" class="dropdown-menu hidden">
                        <div class="dropdown-item" onclick="showProfile()">
                            <div class="dropdown-icon">
                                <svg viewBox="0 0 24 24">
                                    <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                                </svg>
                            </div>
                            <span>Мой профиль</span>
                        </div>
                        <div class="dropdown-item" onclick="showNewChat()">
                            <div class="dropdown-icon">
                                <svg viewBox="0 0 24 24">
                                    <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                                </svg>
                            </div>
                            <span>Новый чат</span>
                        </div>
                        <div class="dropdown-item" onclick="logout()">
                            <div class="dropdown-icon">
                                <svg viewBox="0 0 24 24">
                                    <path d="M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z"/>
                                </svg>
                            </div>
                            <span>Выйти</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="search-container">
                <div class="search-wrapper">
                    <div class="search-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                        </svg>
                    </div>
                    <input type="text" id="searchContacts" class="search-box" placeholder="Поиск пользователей...">
                    <div class="search-line"></div>
                </div>
            </div>
            
            <div class="contacts-list" id="contactsList">
                <div class="loader"></div>
            </div>
        </div>
        
        <!-- Область чата -->
        <div class="chat-area" id="chatArea">
            <div class="chat-header">
                <div class="chat-user">
                    <div class="avatar pulse" id="currentChatAvatar">?</div>
                    <div class="user-details">
                        <h3 id="currentChatName">Выберите чат</h3>
                        <p id="currentChatStatus"></p>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="action-btn floating" onclick="showChatInfo()">
                        <svg viewBox="0 0 24 24">
                            <path d="M13.5,4A1.5,1.5 0 0,0 12,5.5A1.5,1.5 0 0,0 13.5,7A1.5,1.5 0 0,0 15,5.5A1.5,1.5 0 0,0 13.5,4M13.14,8.77C11.95,8.87 8.7,11.46 8.7,11.46C8.5,11.61 8.56,11.6 8.72,11.88C8.88,12.15 8.86,12.17 9.05,12.04C9.25,11.91 9.58,11.7 10.13,11.36C12.25,10 10.47,13.14 9.56,18.43C9.2,21.05 11.56,19.7 12.17,19.3C12.77,18.91 14.38,17.8 14.54,17.69C14.76,17.54 14.6,17.42 14.43,17.17C14.31,17 14.19,17.12 14.19,17.12C13.54,17.55 12.35,18.45 12.19,17.88C12,17.31 13.22,13.4 13.89,10.71C14,10.07 14.3,8.67 13.14,8.77Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="messages-container" id="messagesContainer">
                <div class="welcome-screen">
                    <div class="welcome-icon">
                        <svg class="chat-bubble" viewBox="0 0 100 100">
                            <path class="bubble-path" d="M20,20 Q20,10 30,10 H70 Q80,10 80,20 V60 Q80,70 70,70 H50 L30,90 V70 H30 Q20,70 20,60 V20"/>
                        </svg>
                    </div>
                    <h3>Выберите чат</h3>
                    <p>Начните общение с другим пользователем</p>
                </div>
            </div>
            
            <div class="message-input-area">
                <div class="input-container">
                    <button class="attachment-btn floating" onclick="attachFile()">
                        <svg viewBox="0 0 24 24">
                            <path d="M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"/>
                        </svg>
                    </button>
                    <div class="input-wrapper">
                        <textarea id="messageInput" class="message-input" placeholder="Напишите сообщение..." rows="1" disabled></textarea>
                        <div class="input-line"></div>
                    </div>
                    <button id="sendButton" class="send-btn floating" onclick="sendMessage()" disabled>
                        <svg class="send-icon" viewBox="0 0 24 24">
                            <path d="M2,21L23,12L2,3V10L17,12L2,14V21Z"/>
                        </svg>
                        <div class="send-ripple"></div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
